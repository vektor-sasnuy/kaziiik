<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Панель керування</title>

  <!-- Bootstrap -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />

  <!-- Bootstrap Icons -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
    rel="stylesheet"
  />

  <style>
    :root{
      --radius-xl: 20px;
      --radius-lg: 16px;
      --radius-md: 12px;
      --shadow-sm: 0 2px 8px rgba(15, 23, 42, .04);
      --shadow-md: 0 8px 24px rgba(15, 23, 42, .08);
      --shadow-lg: 0 16px 48px rgba(15, 23, 42, .12);
      --border: rgba(15, 23, 42, .08);
      --border-hover: rgba(15, 23, 42, .14);
      --muted: rgba(15, 23, 42, .58);
      --bg: #f8f9fc;
      --card: #ffffff;
      --hover-lift: translateY(-2px);
    }

    * {
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    body { 
      background: var(--bg);
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    }

    .app-shell { min-height: 100vh; }

    /* ===== TOPBAR (покращена) ===== */
    .topbar {
      position: sticky;
      top: 0;
      z-index: 1020;
      background: rgba(255, 255, 255, .92);
      backdrop-filter: blur(12px) saturate(180%);
      border-bottom: 1px solid var(--border);
      transition: all .3s ease;
    }

    .topbar-inner {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
    }

    .topbar-brand {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .brand-title {
      font-size: 1.35rem;
      font-weight: 800;
      letter-spacing: -0.02em;
      margin: 0;
      background: linear-gradient(135deg, #0d6efd 0%, #0a58ca 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .status-badge {
      display: inline-flex;
      align-items: center;
      gap: .4rem;
      padding: .35rem .75rem;
      border-radius: 999px;
      background: rgba(25, 135, 84, .08);
      border: 1px solid rgba(25, 135, 84, .15);
      font-size: .75rem;
      font-weight: 600;
      color: #198754;
    }

    .status-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: #198754;
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: .6; transform: scale(1.1); }
    }

    /* ===== SIDEBAR (покращена навігація) ===== */
    .sidebar { 
      position: sticky; 
      top: 92px;
    }

    .panel {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius-xl);
      box-shadow: var(--shadow-sm);
      transition: all .2s ease;
    }

    .nav-section-title {
      font-size: .7rem;
      text-transform: uppercase;
      letter-spacing: .1em;
      color: var(--muted);
      font-weight: 700;
      margin: 0 0 .75rem 0;
      padding: 0 .25rem;
    }

    .nav-pill {
      border-radius: var(--radius-md);
      padding: .65rem .85rem;
      color: rgba(15, 23, 42, .72);
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: .75rem;
      transition: all .2s cubic-bezier(0.4, 0, 0.2, 1);
      border: 1px solid transparent;
      font-weight: 500;
      font-size: .95rem;
      position: relative;
      overflow: hidden;
    }

    .nav-pill::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      width: 3px;
      background: #0d6efd;
      transform: scaleY(0);
      transition: transform .2s ease;
    }

    .nav-pill:hover {
      background: rgba(13, 110, 253, .04);
      color: rgba(13, 110, 253, 1);
      transform: translateX(3px);
      border-color: rgba(13, 110, 253, .1);
    }

    .nav-pill.active {
      background: rgba(13, 110, 253, .1);
      color: rgba(13, 110, 253, 1);
      border-color: rgba(13, 110, 253, .2);
      font-weight: 600;
      box-shadow: 0 2px 8px rgba(13, 110, 253, .12);
    }

    .nav-pill.active::before {
      transform: scaleY(1);
    }

    .nav-count {
      margin-left: auto;
      padding: .15rem .5rem;
      border-radius: 999px;
      background: rgba(15, 23, 42, .06);
      font-size: .75rem;
      font-weight: 600;
      color: var(--muted);
      min-width: 28px;
      text-align: center;
    }

    .nav-pill.active .nav-count {
      background: rgba(13, 110, 253, .15);
      color: #0d6efd;
    }

    /* ===== KPI CARDS (покращені) ===== */
    .kpi-card {
      border-radius: var(--radius-xl);
      border: 1px solid var(--border);
      background: var(--card);
      box-shadow: var(--shadow-sm);
      transition: all .25s cubic-bezier(0.4, 0, 0.2, 1);
      overflow: hidden;
      position: relative;
      cursor: pointer;
    }

    .kpi-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, transparent, currentColor, transparent);
      opacity: 0;
      transition: opacity .3s ease;
    }

    .kpi-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-lg);
      border-color: var(--border-hover);
    }

    .kpi-card:hover::before {
      opacity: .6;
    }

    .kpi-top {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 1rem;
    }

    .kpi-label {
      font-size: .8rem;
      letter-spacing: .06em;
      text-transform: uppercase;
      color: var(--muted);
      margin: 0;
      font-weight: 700;
    }

    .kpi-value {
      font-weight: 900;
      letter-spacing: -0.03em;
      margin: .25rem 0 0 0;
      font-size: clamp(1.8rem, 3vw, 2.4rem);
      line-height: .95;
      background: linear-gradient(135deg, currentColor 0%, currentColor 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      filter: brightness(1.1);
    }

    .kpi-meta {
      display: flex;
      align-items: center;
      gap: .5rem;
      margin-top: .75rem;
      flex-wrap: wrap;
    }

    .badge-soft {
      border: 1px solid var(--border);
      background: rgba(15, 23, 42, .04);
      color: rgba(15, 23, 42, .68);
      font-weight: 600;
      border-radius: 999px;
      padding: .3rem .65rem;
      font-size: .7rem;
      white-space: nowrap;
    }

    .kpi-trend {
      display: inline-flex;
      align-items: center;
      gap: .25rem;
      font-size: .75rem;
      font-weight: 600;
      color: #198754;
    }

    .kpi-trend.down {
      color: #dc3545;
    }

    .accent-primary { 
      background: linear-gradient(135deg, rgba(13,110,253,.06), rgba(13,110,253,.02));
      color: #0d6efd;
    }
    .accent-success { 
      background: linear-gradient(135deg, rgba(25,135,84,.06), rgba(25,135,84,.02));
      color: #198754;
    }
    .accent-warning { 
      background: linear-gradient(135deg, rgba(255,193,7,.1), rgba(255,193,7,.03));
      color: #ffc107;
    }
    .accent-danger { 
      background: linear-gradient(135deg, rgba(220,53,69,.06), rgba(220,53,69,.02));
      color: #dc3545;
    }

    .kpi-icon-wrap {
      width: 52px;
      height: 52px;
      border-radius: var(--radius-lg);
      border: 1px solid var(--border);
      background: rgba(255,255,255,.8);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      flex: 0 0 auto;
      transition: all .25s ease;
    }

    .kpi-card:hover .kpi-icon-wrap {
      transform: scale(1.05) rotate(-5deg);
      box-shadow: 0 4px 12px rgba(0,0,0,.08);
    }

    .kpi-action {
      margin-top: 1rem;
      padding-top: 1rem;
      border-top: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .kpi-link {
      font-weight: 600;
      text-decoration: none;
      font-size: .85rem;
      display: inline-flex;
      align-items: center;
      gap: .35rem;
      transition: gap .2s ease;
    }

    .kpi-link:hover {
      gap: .6rem;
    }

    /* ===== TABLE (покращена) ===== */
    .widget-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
      margin-bottom: 1.5rem;
      flex-wrap: wrap;
    }

    .widget-title {
      font-weight: 800;
      letter-spacing: -0.02em;
      margin: 0;
      font-size: 1.35rem;
    }

    .widget-subtitle {
      color: var(--muted);
      font-size: .9rem;
      margin-top: .35rem;
    }

    .table-wrapper {
      border-radius: var(--radius-lg);
      overflow: hidden;
      border: 1px solid var(--border);
    }

    .table {
      margin: 0;
    }

    .table thead th {
      color: rgba(15, 23, 42, .65);
      font-weight: 700;
      background: rgba(15, 23, 42, .02);
      border-bottom: 2px solid var(--border);
      padding: 1rem;
      font-size: .85rem;
      text-transform: uppercase;
      letter-spacing: .05em;
    }

    .table td {
      padding: 1rem;
      vertical-align: middle;
      border-bottom: 1px solid var(--border);
    }

    .table tbody tr {
      transition: all .15s ease;
    }

    .table-hover tbody tr:hover {
      background: rgba(13, 110, 253, .02);
      transform: scale(1.005);
    }

    .table tbody tr:last-child td {
      border-bottom: none;
    }

    .row-number {
      width: 40px;
      height: 40px;
      border-radius: 10px;
      background: rgba(13, 110, 253, .06);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: .85rem;
      color: #0d6efd;
    }

    .item-name {
      font-weight: 600;
      font-size: 1rem;
      color: rgba(15, 23, 42, .92);
      margin-bottom: .25rem;
    }

    .item-meta {
      display: flex;
      align-items: center;
      gap: .5rem;
      color: var(--muted);
      font-size: .85rem;
    }

    .meta-divider {
      color: var(--border);
    }

    .date-badge {
      display: inline-flex;
      align-items: center;
      gap: .4rem;
      padding: .4rem .75rem;
      border-radius: 8px;
      background: rgba(15, 23, 42, .04);
      color: var(--muted);
      font-size: .85rem;
      font-weight: 500;
    }

    .empty-state {
      padding: 4rem 2rem;
      text-align: center;
    }

    .empty-icon {
      width: 80px;
      height: 80px;
      margin: 0 auto 1.5rem;
      border-radius: var(--radius-xl);
      background: rgba(13, 110, 253, .06);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #0d6efd;
    }

    .empty-title {
      font-weight: 700;
      font-size: 1.15rem;
      margin-bottom: .5rem;
      color: rgba(15, 23, 42, .85);
    }

    .empty-text {
      color: var(--muted);
      font-size: .95rem;
    }

    /* ===== RIGHT RAIL (покращений) ===== */
    .summary-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: .75rem 0;
      border-bottom: 1px solid var(--border);
    }

    .summary-item:last-child {
      border-bottom: none;
    }

    .summary-label {
      color: var(--muted);
      font-size: .9rem;
      display: flex;
      align-items: center;
      gap: .5rem;
    }

    .summary-value {
      font-weight: 700;
      font-size: 1.15rem;
      color: rgba(15, 23, 42, .92);
    }

    .expansion-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .expansion-list li {
      padding: .65rem 0;
      display: flex;
      align-items: center;
      gap: .75rem;
      color: var(--muted);
      font-size: .9rem;
      border-bottom: 1px dashed var(--border);
    }

    .expansion-list li:last-child {
      border-bottom: none;
    }

    .expansion-list li::before {
      content: '→';
      color: #0d6efd;
      font-weight: 700;
    }

    /* ===== BUTTONS (покращені) ===== */
    .control {
      border-radius: var(--radius-md);
      border: 1px solid var(--border) !important;
      box-shadow: none !important;
      transition: all .2s ease;
      font-weight: 500;
    }

    .control:focus {
      border-color: rgba(13,110,253,.5) !important;
      box-shadow: 0 0 0 .25rem rgba(13,110,253,.1) !important;
    }

    .control:hover {
      border-color: var(--border-hover) !important;
      transform: translateY(-1px);
    }

    .btn-primary {
      background: linear-gradient(135deg, #0d6efd 0%, #0a58ca 100%);
      border: none;
      box-shadow: 0 4px 12px rgba(13, 110, 253, .25);
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(13, 110, 253, .35);
    }

    /* ===== SEARCH (покращений) ===== */
    .search-wrapper {
      position: relative;
      max-width: 320px;
    }

    .search-icon {
      position: absolute;
      left: 1rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--muted);
      pointer-events: none;
    }

    .search-input {
      padding-left: 2.75rem !important;
    }

    /* ===== ICONS ===== */
    .bi-kpi { font-size: 1.65rem; opacity: .85; }
    .bi-nav { font-size: 1.1rem; opacity: .85; }
    .i-16 { width: 16px; height: 16px; }
    .i-18 { width: 18px; height: 18px; }
    .i-20 { width: 20px; height: 20px; }

    /* ===== QUICK ACTIONS (новий блок) ===== */
    .quick-actions {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: .75rem;
    }

    .quick-action-btn {
      padding: 1rem;
      border-radius: var(--radius-md);
      border: 1px solid var(--border);
      background: var(--card);
      text-decoration: none;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: .5rem;
      transition: all .2s ease;
      text-align: center;
    }

    .quick-action-btn:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-md);
      border-color: var(--border-hover);
    }

    .quick-action-icon {
      width: 42px;
      height: 42px;
      border-radius: 12px;
      background: rgba(13, 110, 253, .08);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #0d6efd;
    }

    .quick-action-label {
      font-size: .85rem;
      font-weight: 600;
      color: rgba(15, 23, 42, .75);
    }

    /* ===== RESPONSIVE ===== */
    @media (max-width: 991.98px) {
      .sidebar { position: static; top: auto; }
      .quick-actions { grid-template-columns: repeat(4, 1fr); }
    }

    @media (max-width: 767.98px) {
      .quick-actions { grid-template-columns: repeat(2, 1fr); }
    }
  </style>
</head>

<body>
  <div class="app-shell">
    <!-- Topbar -->
    <div class="topbar">
      <div class="container-fluid py-3">
        <div class="topbar-inner">
          <div class="topbar-brand">
            <button
              class="btn btn-outline-secondary d-lg-none control"
              type="button"
              data-bs-toggle="offcanvas"
              data-bs-target="#sidebarCanvas"
              aria-controls="sidebarCanvas"
            >
              <i class="bi bi-list"></i>
            </button>

            <div>
              <h1 class="brand-title">Панель керування</h1>
              <div class="d-flex align-items-center gap-2 mt-1">
                <span class="status-badge">
                  <span class="status-dot"></span>
                  Онлайн
                </span>
                <span class="small text-muted d-none d-md-inline">
                  Оновлено: {% now "d.m.Y H:i" %}
                </span>
              </div>
            </div>
          </div>

          <div class="d-flex align-items-center gap-2">
            <div class="search-wrapper d-none d-md-block">
              <i class="bi bi-search search-icon"></i>
              <input
                name="q"
                class="form-control control search-input"
                type="search"
                placeholder="Швидкий пошук..."
                value="{{ request.GET.q|default:'' }}"
              />
            </div>

            <div class="dropdown">
              <button class="btn btn-primary control" data-bs-toggle="dropdown">
                <i class="bi bi-lightning-charge-fill me-1"></i>
                Швидкі дії
              </button>
              <ul class="dropdown-menu dropdown-menu-end shadow-lg border-0 mt-2" style="min-width: 220px;">
                <li><h6 class="dropdown-header fw-bold">Перейти до</h6></li>
                <li><a class="dropdown-item d-flex align-items-center gap-2" href="{% url 'cars_home' %}">
                  <i class="bi bi-car-front-fill text-primary"></i> Машини
                </a></li>
                <li><a class="dropdown-item d-flex align-items-center gap-2" href="{% url 'mopeds_home' %}">
                  <i class="bi bi-bicycle text-success"></i> Мопеди
                </a></li>
                <li><a class="dropdown-item d-flex align-items-center gap-2" href="{% url 'motocycles_home' %}">
                  <i class="bi bi-speedometer2 text-warning"></i> Мотоцикли
                </a></li>
                <li><a class="dropdown-item d-flex align-items-center gap-2" href="{% url 'atvs_home' %}">
                  <i class="bi bi-truck-front-fill text-danger"></i> ATV
                </a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item d-flex align-items-center gap-2" href="{% url 'garage_list' %}">
                  <i class="bi bi-house-garage text-info"></i> Мій гараж
                </a></li>
                  <li><a class="dropdown-item" href="{% url 'garage_create' %}">Створити гараж</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item d-flex align-items-center gap-2" href="{% url 'cases:case_list' %}">
                  <i class="bi bi-gift text-danger"></i> Кейси
                </a></li>
              </ul>
            </div>
          </div>
        </div>

        <!-- Mobile search -->
        <div class="search-wrapper d-md-none mt-3 w-100">
          <i class="bi bi-search search-icon"></i>
          <input
            name="q"
            class="form-control control search-input"
            type="search"
            placeholder="Швидкий пошук..."
            value="{{ request.GET.q|default:'' }}"
          />
        </div>
      </div>
    </div>

    <div class="container-fluid py-4">
      <div class="row g-4">
        <!-- Sidebar -->
        <aside class="col-lg-2 d-none d-lg-block">
          <div class="panel p-3 sidebar">
            <div class="nav-section-title">Основні</div>

            <a class="nav-pill active" href="#">
              <i class="bi bi-grid-fill bi-nav"></i>
              Огляд
            </a>

            <div class="mt-3"></div>
            <div class="nav-section-title">Транспорт</div>

            <a class="nav-pill" href="{% url 'cars_home' %}">
              <i class="bi bi-car-front-fill bi-nav"></i>
              Машини
              <span class="nav-count">{{ cars_count|default:"0" }}</span>
            </a>
            <a class="nav-pill" href="{% url 'mopeds_home' %}">
              <i class="bi bi-bicycle bi-nav"></i>
              Мопеди
              <span class="nav-count">{{ mopeds_count|default:"0" }}</span>
            </a>
            <a class="nav-pill" href="{% url 'motocycles_home' %}">
              <i class="bi bi-speedometer2 bi-nav"></i>
              Мотоцикли
              <span class="nav-count">{{ motocycles_count|default:"0" }}</span>
            </a>
            <a class="nav-pill" href="{% url 'atvs_home' %}">
              <i class="bi bi-truck-front-fill bi-nav"></i>
              ATV
              <span class="nav-count">{{ atvs_count|default:"0" }}</span>
            </a>

            <div class="mt-3"></div>
            <div class="nav-section-title">Колекція</div>

            <a class="nav-pill" href="{% url 'garage_list' %}">
              <i class="bi bi-house-garage bi-nav"></i>
              Мій гараж
            </a>

            <div class="mt-3"></div>
            <div class="nav-section-title">Розваги</div>

            <a class="nav-pill" href="{% url 'cases:case_list' %}">
              <i class="bi bi-gift bi-nav"></i>
              Кейси
            </a>

            <div class="mt-3"></div>
            <div class="nav-section-title">Скоро</div>
            
            <a class="nav-pill disabled" href="#" tabindex="-1">
              <i class="bi bi-file-earmark-bar-graph bi-nav"></i>
              Звіти
            </a>
            <a class="nav-pill disabled" href="#" tabindex="-1">
              <i class="bi bi-people bi-nav"></i>
              Користувачі
            </a>
          </div>
        </aside>

        <!-- Offcanvas sidebar (mobile) -->
        <div class="offcanvas offcanvas-start" tabindex="-1" id="sidebarCanvas">
          <div class="offcanvas-header border-bottom">
            <h5 class="offcanvas-title fw-bold">Навігація</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
          </div>
          <div class="offcanvas-body">
            <div class="nav-section-title">Основні</div>
            <a class="nav-pill active" href="#">
              <i class="bi bi-grid-fill bi-nav"></i> Огляд
            </a>
            
            <div class="mt-3"></div>
            <div class="nav-section-title">Транспорт</div>
            <a class="nav-pill" href="{% url 'cars_home' %}">
              <i class="bi bi-car-front-fill bi-nav"></i> Машини
              <span class="nav-count">{{ cars_count|default:"0" }}</span>
            </a>
            <a class="nav-pill" href="{% url 'mopeds_home' %}">
              <i class="bi bi-bicycle bi-nav"></i> Мопеди
              <span class="nav-count">{{ mopeds_count|default:"0" }}</span>
            </a>
            <a class="nav-pill" href="{% url 'motocycles_home' %}">
              <i class="bi bi-speedometer2 bi-nav"></i> Мотоцикли
              <span class="nav-count">{{ motocycles_count|default:"0" }}</span>
            </a>
            <a class="nav-pill" href="{% url 'atvs_home' %}">
              <i class="bi bi-truck-front-fill bi-nav"></i> ATV
              <span class="nav-count">{{ atvs_count|default:"0" }}</span>
            </a>
            
            <div class="mt-3"></div>
            <a class="nav-pill" href="{% url 'garage_list' %}">
              <i class="bi bi-house-garage bi-nav"></i> Мій гараж
            </a>
          </div>
        </div>

        <!-- Main -->
        <main class="col-lg-7 col-xl-8">
          <!-- KPI grid -->
          <div class="row g-3 mb-4">
            <div class="col-md-6 col-xl-3">
              <div class="kpi-card accent-primary p-3 h-100" onclick="window.location.href='{% url 'cars_home' %}'">
                <div class="kpi-top">
                  <div style="flex: 1;">
                    <p class="kpi-label">Машини</p>
                    <div class="kpi-value">{{ cars_count|default:"0" }}</div>
                    <div class="kpi-meta">
                      <span class="badge-soft">
                        <i class="bi bi-check-circle-fill" style="font-size: .7rem;"></i>
                        Активно
                      </span>
                    </div>
                  </div>
                  <div class="kpi-icon-wrap">
                    <i class="bi bi-car-front-fill bi-kpi text-primary"></i>
                  </div>
                </div>
                <div class="kpi-action">
                  <a class="kpi-link link-primary" href="{% url 'cars_home' %}">
                    Переглянути
                    <i class="bi bi-arrow-right"></i>
                  </a>
                </div>
              </div>
            </div>

            <div class="col-md-6 col-xl-3">
              <div class="kpi-card accent-success p-3 h-100" onclick="window.location.href='{% url 'mopeds_home' %}'">
                <div class="kpi-top">
                  <div style="flex: 1;">
                    <p class="kpi-label">Мопеди</p>
                    <div class="kpi-value">{{ mopeds_count|default:"0" }}</div>
                    <div class="kpi-meta">
                      <span class="badge-soft">
                        <i class="bi bi-check-circle-fill" style="font-size: .7rem;"></i>
                        Активно
                      </span>
                    </div>
                  </div>
                  <div class="kpi-icon-wrap">
                    <i class="bi bi-bicycle bi-kpi text-success"></i>
                  </div>
                </div>
                <div class="kpi-action">
                  <a class="kpi-link link-success" href="{% url 'mopeds_home' %}">
                    Переглянути
                    <i class="bi bi-arrow-right"></i>
                  </a>
                </div>
              </div>
            </div>

            <div class="col-md-6 col-xl-3">
              <div class="kpi-card accent-warning p-3 h-100" onclick="window.location.href='{% url 'motocycles_home' %}'">
                <div class="kpi-top">
                  <div style="flex: 1;">
                    <p class="kpi-label">Мотоцикли</p>
                    <div class="kpi-value">{{ motocycles_count|default:"0" }}</div>
                    <div class="kpi-meta">
                      <span class="badge-soft">
                        <i class="bi bi-check-circle-fill" style="font-size: .7rem;"></i>
                        Активно
                      </span>
                    </div>
                  </div>
                  <div class="kpi-icon-wrap">
                    <i class="bi bi-speedometer2 bi-kpi text-warning"></i>
                  </div>
                </div>
                <div class="kpi-action">
                  <a class="kpi-link link-warning" href="{% url 'motocycles_home' %}">
                    Переглянути
                    <i class="bi bi-arrow-right"></i>
                  </a>
                </div>
              </div>
            </div>

            <div class="col-md-6 col-xl-3">
              <div class="kpi-card accent-danger p-3 h-100" onclick="window.location.href='{% url 'atvs_home' %}'">
                <div class="kpi-top">
                  <div style="flex: 1;">
                    <p class="kpi-label">ATV</p>
                    <div class="kpi-value">{{ atvs_count|default:"0" }}</div>
                    <div class="kpi-meta">
                      <span class="badge-soft">
                        <i class="bi bi-check-circle-fill" style="font-size: .7rem;"></i>
                        Активно
                      </span>
                    </div>
                  </div>
                  <div class="kpi-icon-wrap">
                    <i class="bi bi-truck-front-fill bi-kpi text-danger"></i>
                  </div>
                </div>
                <div class="kpi-action">
                  <a class="kpi-link link-danger" href="{% url 'atvs_home' %}">
                    Переглянути
                    <i class="bi bi-arrow-right"></i>
                  </a>
                </div>
              </div>
            </div>
          </div>

          <!-- Recent table -->
          <div class="panel p-4">
            <div class="widget-header">
              <div>
                <h2 class="widget-title">
                  <i class="bi bi-clock-history me-2 text-primary"></i>
                  Останні машини
                </h2>
                <div class="widget-subtitle">Нещодавно додані записи в каталог</div>
              </div>
              <a class="btn btn-outline-primary control" href="{% url 'cars_home' %}">
                Всі машини
                <i class="bi bi-arrow-right ms-1"></i>
              </a>
            </div>

            <div class="table-wrapper">
              <table class="table table-hover mb-0">
                <thead>
                  <tr>
                    <th style="width: 60px;">#</th>
                    <th>Транспорт</th>
                    <th class="d-none d-lg-table-cell">Кузов</th>
                    <th class="d-none d-lg-table-cell">Двигун</th>
                    <th class="text-end" style="width: 140px;">Дата</th>
                  </tr>
                </thead>
                <tbody>
                  {% for car in latest_cars %}
                    <tr>
                      <td>
                        <div class="row-number">{{ forloop.counter }}</div>
                      </td>
                      <td>
                        <div class="item-name">{{ car.name }}</div>
                        <div class="item-meta d-lg-none">
                          <span>{{ car.body|default:"—" }}</span>
                          <span class="meta-divider">•</span>
                          <span>{{ car.motor|default:"—" }}</span>
                        </div>
                      </td>
                      <td class="d-none d-lg-table-cell">
                        <span class="badge-soft">{{ car.body|default:"—" }}</span>
                      </td>
                      <td class="d-none d-lg-table-cell">
                        <span class="badge-soft">{{ car.motor|default:"—" }}</span>
                      </td>
                      <td class="text-end">
                        <div class="date-badge">
                          <i class="bi bi-calendar3"></i>
                          {{ car.created_at|date:"d.m.Y"|default:"—" }}
                        </div>
                      </td>
                    </tr>
                  {% empty %}
                    <tr>
                      <td colspan="5" class="p-0">
                        <div class="empty-state">
                          <div class="empty-icon">
                            <i class="bi bi-inbox" style="font-size: 2.5rem;"></i>
                          </div>
                          <div class="empty-title">Немає записів</div>
                          <div class="empty-text">
                            Почніть додавати транспорт до каталогу
                          </div>
                          <a href="{% url 'cars_home' %}" class="btn btn-primary control mt-3">
                            <i class="bi bi-plus-circle me-2"></i>
                            Додати машину
                          </a>
                        </div>
                      </td>
                    </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
          </div>

          <!-- Quick actions (mobile) -->
          <div class="panel p-4 mt-4 d-lg-none">
            <h2 class="widget-title mb-3">
              <i class="bi bi-lightning-charge-fill me-2 text-warning"></i>
              Швидкий доступ
            </h2>
            <div class="quick-actions">
              <a href="{% url 'cars_home' %}" class="quick-action-btn">
                <div class="quick-action-icon">
                  <i class="bi bi-car-front-fill"></i>
                </div>
                <div class="quick-action-label">Машини</div>
              </a>
              <a href="{% url 'mopeds_home' %}" class="quick-action-btn">
                <div class="quick-action-icon bg-success-subtle">
                  <i class="bi bi-bicycle text-success"></i>
                </div>
                <div class="quick-action-label">Мопеди</div>
              </a>
              <a href="{% url 'motocycles_home' %}" class="quick-action-btn">
                <div class="quick-action-icon bg-warning-subtle">
                  <i class="bi bi-speedometer2 text-warning"></i>
                </div>
                <div class="quick-action-label">Мотоцикли</div>
              </a>
              <a href="{% url 'atvs_home' %}" class="quick-action-btn">
                <div class="quick-action-icon bg-danger-subtle">
                  <i class="bi bi-truck-front-fill text-danger"></i>
                </div>
                <div class="quick-action-label">ATV</div>
              </a>
            </div>
          </div>
        </main>

        <!-- Right rail -->
        <aside class="col-lg-3 col-xl-2">
          <div class="panel p-4 mb-4">
            <h2 class="widget-title mb-3">
              <i class="bi bi-bar-chart-fill me-2 text-primary"></i>
              Статистика
            </h2>

            <div class="summary-item">
              <div class="summary-label">
                <i class="bi bi-collection text-primary"></i>
                Категорій
              </div>
              <div class="summary-value">4</div>
            </div>

            <div class="summary-item">
              <div class="summary-label">
                <i class="bi bi-box text-success"></i>
                Всього записів
              </div>
              <div class="summary-value">
                {{ cars_count|default:"0"|add:mopeds_count|add:motocycles_count|add:atvs_count }}
              </div>
            </div>

            <div class="summary-item">
              <div class="summary-label">
                <i class="bi bi-activity text-warning"></i>
                Активних
              </div>
              <div class="summary-value">
                {{ cars_count|default:"0"|add:mopeds_count|add:motocycles_count|add:atvs_count }}
              </div>
            </div>
          </div>

          <div class="panel p-4 mb-4">
            <h2 class="widget-title mb-3">
              <i class="bi bi-rocket-takeoff-fill me-2 text-success"></i>
              Розвиток
            </h2>
            <ul class="expansion-list">
              <li>Звіти та експорт</li>
              <li>Права доступу</li>
              <li>Сповіщення</li>
              <li>Аналітика</li>
              <li>API інтеграція</li>
            </ul>
          </div>

          <div class="panel p-4" style="background: linear-gradient(135deg, rgba(13,110,253,.08), rgba(13,110,253,.02)); border-color: rgba(13,110,253,.15);">
            <div class="text-center">
              <div class="mb-3">
                <i class="bi bi-house-garage" style="font-size: 3rem; color: #0d6efd;"></i>
              </div>
              <h3 class="h6 fw-bold mb-2">Мій гараж</h3>
              <p class="small text-muted mb-3">
                Ваша персональна колекція улюбленого транспорту
              </p>
              <a href="{% url 'garage_list' %}" class="btn btn-primary w-100 control">
                <i class="bi bi-box-arrow-in-right me-2"></i>
                Відкрити гараж
              </a>
            </div>
          </div>
        </aside>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>